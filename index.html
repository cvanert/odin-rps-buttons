<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Rock Paper Scissors</title>
</head>
<body>
  <main>
    <script language="JavaScript" type="text/javascript">


      let playerScore = 0;
      let computerScore = 0;
      let round = 1;

      function playRSP() {
        playerScore = 0;
        computerScore = 0;
        round = 1;
        game();
      }

      function game() {
        let computerSelection = computerPlay();
        let playerSelection = playerInput();

        if (computerScore < 5 && playerScore < 5) {
          roundScore(computerSelection, playerSelection);
          console.log(playRound(computerSelection, playerSelection));

          if(playRound(computerSelection, playerSelection).includes("Invalid")) {
            game();
          } else {
            round++;
            game();
          }
        } else if (playerScore === 5 && playerScore > computerScore) {
          alert("CONGRATULATIONS! YOU WERE VICTORIOUS!");
        } else if (computerScore === 5 && computerScore > playerScore) {
          alert ("Sorry, the computer won the series.");
        }
      }

      function playRound(computerSelection, playerSelection) {
        let currentScore = "Current score is Computer: " + computerScore + " You: " + playerScore;

        if (computerSelection === "Rock" && playerSelection === "Rock" || computerSelection === "Paper" && playerSelection === "Paper" || computerSelection === "Scissors" && playerSelection === "Scissors") {
          return "It's a tie! " + currentScore;
        } else if (computerSelection === "Rock" && playerSelection === "Paper" || computerSelection === "Paper" && playerSelection === "Scissors" || computerSelection === "Scissors" && playerSelection === "Rock") {
          playerScore + 1;
          return "Congratulation! You won! " + playerSelection + " beats " + computerSelection +"! " + currentScore;
        } else if (computerSelection === "Rock" && playerSelection === "Scissors" || computerSelection === "Paper" && playerSelection === "Rock" || computerSelection === "Scissors" && playerSelection === "Paper"){
          computerScore + 1;
          return "Sorry, you lose. " + computerSelection + " beats " + playerSelection + "! " + currentScore;
        }
      }

      function roundScore(computerSelection, playerSelection) {
        if (playRound(computerSelection, playerSelection).includes("won")) {
          playerScore++;
        } else if (playRound(computerSelection, playerSelection).includes("lose")) {
          computerScore++;
        } else {
          computerScore + 0;
          playerScore + 0;
        }
      }

      function computerPlay() {
        let selection = Math.floor(Math.random() * Math.floor(3));
        if (selection === 1) {
          return "Rock";
        } else if (selection === 2) {
          return "Paper";
        } else {
          return "Scissors";
        }
      }

      function playerInput(){
        let playerInput = prompt("Select Rock, Paper, or Scissors!");
          if (playerInput.toLowerCase() === "rock" || playerInput.toLowerCase() === "paper" || playerInput.toLowerCase() === "scissors") {
            return playerInput[0].toUpperCase() + playerInput.substring(1).toLowerCase();
        } else {
          alert("Invalid selection. Please make valid selection.");
        }
      }


    </script>
  </main>
</body>
</html>
